{"version":3,"sources":["interfaces/user.js","interfaces/ariticle.js","components/ArticleBlock/ArticleBlock.jsx","local/articleUtil.js","views/Blogs/Blogs.jsx","views/TimeLine/TimeLine.jsx","interfaces/tags.js","local/tagUtils.js","views/Tags/Tags.jsx","interfaces/logs.js","local/logUtil.js","views/Logs/Logs.jsx","components/Article/Article.jsx","components/Bar/Bar.jsx","components/Editor/Editor.jsx","components/CodemirrorEditor/index.jsx","components/EditorC/index.jsx","views/Content/Content.jsx","views/Sidebar/Sidebar.jsx","views/Layout/Layout.jsx","App.js","index.js"],"names":["_callee","qqNum","regenerator_default","a","wrap","_context","prev","next","abrupt","Axios","get","stop","getCSRF","_getCSRF","apply","this","arguments","_callee2","_context2","then","res","status","cookie","document","_wrapRegExp","csrftoken","exec","groups","message","warn","catch","err","console","log","markCode","code","marked","articleObj","CSRFTOKEN","form","FormData","append","title","author","content","tagId","post","listArticles","_x2","_listArticles","pageNum","setOptions","renderer","Renderer","gfm","tables","breaks","pedantic","sanitize","smartLists","smartypants","highlight","hljs","highlightAuto","value","componentName","tag","props","tags","react_default","createElement","className","dateTime","Date","createdAt","toDateString","react_router_dom","to","dangerouslySetInnerHTML","__html","substring","es_tag","color","name","Component","articleTool","id","targetId","articles","window","sessionStorage","getItem","JSON","parse","forEach","item","index","articleArr","setItem","stringify","splice","article","targetIndex","unshift","_UNMOUNTED","state","data","getArticle","Article","getList","_this","setState","save","result","_wizard","content_scrollTop","_articles","scrollTop","_this2","offsetHeight","getElementsByClassName","setTimeout","scrollTo","_this3","style","height","overflowY","ref","map","ArticleBlock_componentName","Object","assign","key","randomColor","Math","floor","random","length","date","timeline","mode","thisDate","split","Item","dot","tooltip","placement","icon","type","fontSize","tagObj","field","createdBy","listTags","_listTags","_callee3","_context3","tagTool","tagArr","inputVisible","inputValue","showInput","input","focus","handleInputChange","e","target","handleInputBlur","handleInputConfirm","tagName","wizard_blog","user","newItem","getColor","_x","_newTag","newTag","Error","concat","toConsumableArray","TagUtil","create","error","saveInputRef","table","i","delTag","_delTag","delete","_this$state","marginBottom","margin","closable","onClose","bind","size","width","onChange","onBlur","onPressEnter","onClick","background","borderStyle","datestring","params","paramsSerializer","qs","arrayFormat","logTool","logArr","logs","history","dateString","_getLogs","getLogs","Log","_listLog","listLog","dir","RangePicker","DatePicker","thisIp","Logs_wrapRegExp","ip","timestamp","computerName","os","method","path","logItem","divider","toTop","_article","parentNode","articleId","parseInt","match","showBar","barHeight","nextProps","nextStates","box","text","scrollHeight","viewPortHeight","getComputedStyle","onmousewheel","top","_bar","bar","maxTop","preventDefault","newBarTop","deltaY","onmousedown","startY","clientY","barTop","onmouseup","onmousemove","viewPortWidth","body","clientX","endPos","textTop","_slide","test","textChange","otextarea","_editor_textarea","require","xhtml","_editor_box","onclick","disableMenu","es_button","_out","_text","Bar_componentName","_preview","_preview_con","normalizeLineEndings","str","replace","CodemirrorHandler","ReactCodeMirror","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","isFocused","componentWillReceiveProps","debounce","codeMirror","codemirror","fromTextArea","textareaNode","options","on","codemirrorValueChanged","cursorActivity","focusChanged","scrollChanged","setValue","defaultValue","toTextArea","undefined","getValue","preserveScrollPosition","prevScrollPosition","getScrollInfo","left","optionName","hasOwnProperty","setOptionIfChanged","newValue","oldValue","getOption","isEqual","setOption","focused","onFocusChange","cm","onCursorActivity","onScroll","doc","change","origin","autoComplete","autoFocus","defaultProps","configure","tabReplace","classPrefix","languages","EditorC","newArticle","_newArticle","_author","tagSelected","_title","rawContent","success","push","handleSearch","handleChange","aceBoxH","previewContent","currentTabIndex","hasContentChanged","scale","CodemirrorOptions","lineNumbers","theme","tabSize","lineWrapping","readOnly","autoCloseTags","extraKeys","setExtraKeys","Option","Select","popContent","placeholder","es_select","showSearch","defaultActiveFirstOption","showArrow","filterOption","onSearch","notFoundContent","spellCheck","popover","trigger","node","aceBox","editorBoxH","onMouseOver","setCurrentIndex","editContainer","CodemirrorEditor_ReactCodeMirror","containerScroll","updateCode","previewContainer","previewWrap","enableMenu","documentElement","clientHeight","querySelector","Tag","setScrollValue","containerH","newCode","that","F11","Esc","resultObj","offset","offsetLine","setCursor","appendTxtFn","appendValue","lastLine","getLine","React","Right","react_router","exact","component","Blogs","TimeLine","Tags","Logs","Editor","Left","nikeName","hideMenu","oleft","_left","ocontent","backgroundColor","clientWidth","transitionDuration","foldMenu","liftMenu","bindEvent","assertThisInitialized","startX","startW","parseFloat","lrMenu","endX","endWidth","colorAlpha","initialTop","startPositionY","endsWith","btMenu","endY","postition","unfoldMenu","pullMenu","_getUser","getUser","avatar","src","href","openEditor","Layout","location","reload","Sidebar_Left","Content_Right","App","Layout_Layout","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.7043c091.chunk.js","sourcesContent":["import Axios from \"axios\";\r\nimport { message } from \"antd\";\r\n\r\n// 获取用户名\r\nexport async function getUser(qqNum) {\r\n    return Axios.get(\"/api/get/sign?uins=\" + qqNum)\r\n}\r\n\r\n// 访问admin，获取csrf\r\nexport async function getCSRF() {\r\n    return Axios.get(\"/api/admin/login/\")\r\n                .then(res=>{\r\n                    if(res.status!==200) message.warn(\"服务器不在线\")\r\n                    else{\r\n                        const cookie = document.cookie;\r\n                        const reg = /csrftoken=(?<csrftoken>.+)/;\r\n                        const CSRFTOKEN = reg.exec(cookie).groups.csrftoken;\r\n                        return CSRFTOKEN;\r\n                    }\r\n                })\r\n                .catch(err=>{\r\n                    console.log(err)\r\n                })\r\n}","import Axios from \"axios\";\r\nimport marked from \"marked\";\r\nimport hljs from \"highlight.js\";\r\nimport { getCSRF } from \"./user\";\r\n\r\n\r\n// marked相关配置\r\nmarked.setOptions({\r\n    renderer: new marked.Renderer(),\r\n    gfm: true,\r\n    tables: true,\r\n    breaks: true,\r\n    pedantic: false,\r\n    sanitize: true,\r\n    smartLists: true,\r\n    smartypants: false,\r\n    highlight: function (code) {\r\n        return hljs.highlightAuto(code).value;\r\n    },\r\n});\r\n\r\n// mark编译\r\nexport function markCode(code) {\r\n    return marked(code)\r\n}\r\n\r\n// 保存文章\r\nexport async function newArticle(articleObj) {\r\n    return getCSRF().then(CSRFTOKEN => {\r\n        const form = new FormData();\r\n        form.append(\"title\", articleObj.title)\r\n        form.append(\"author\", articleObj.author ? articleObj.author : \"Wizard J\")\r\n        form.append(\"content\", articleObj.content)\r\n        form.append(\"tagId\", articleObj.tagId)\r\n        form.append(\"csrfmiddlewaretoken\", CSRFTOKEN)\r\n        return Axios.post(\"/api/new/article\", form)\r\n    })\r\n}\r\n\r\n// 获取文章列表\r\nexport async function listArticles(pageNum) {\r\n    return Axios.get(\"/api/list/articles?page=\" + pageNum)\r\n}","import React, { Component } from 'react';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { markCode } from \"../../interfaces/ariticle\";\r\nimport { Tag } from \"antd\";\r\nimport \"./articleblock.scss\";\r\n\r\nexport default class componentName extends Component {\r\n\r\n    render() {\r\n\r\n        const tag = this.props.tags\r\n\r\n        return (\r\n            <div className=\"article-block\">\r\n                {/* <a href=\"/tale/2017-03-29/introducing-tale\" class=\"catalogue-item\"> */}\r\n                <div className=\"catalogue-item\">\r\n                    <time dateTime=\"2017-03-29 00:00:00 +0000\" className=\"catalogue-time\">{new Date(this.props.createdAt).toDateString()}</time>\r\n                    <NavLink to={this.props.to}>\r\n                        <h1 className=\"catalogue-title\">{this.props.title}</h1>\r\n                    </NavLink>\r\n                    <div className=\"catalogue-line\"></div>\r\n\r\n                    <p dangerouslySetInnerHTML={{__html:markCode(this.props.content).substring(0,100)}}/>\r\n\r\n                    <Tag color={tag.color}>{tag.name}</Tag>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","const articleTool = {}\r\n\r\n\r\n// 通过id从列表中获取文章\r\narticleTool.get = id => {\r\n    let targetId = -1;\r\n    const articles = window.sessionStorage.getItem(\"articles\") ? JSON.parse(window.sessionStorage.getItem(\"articles\")) : [];\r\n    articles.forEach((item, index) => {\r\n        if (item.id === id) targetId = index;\r\n    });\r\n    if (targetId !== -1) return articles[targetId];\r\n    else return null;\r\n}\r\n\r\n// 获取文章列表\r\narticleTool.getList = () => {\r\n    return window.sessionStorage.getItem(\"articles\") ? JSON.parse(window.sessionStorage.getItem(\"articles\")) : null;\r\n}\r\n\r\n// 将文章列表保存起来\r\narticleTool.save = (articleArr) => {\r\n    window.sessionStorage.setItem(\"articles\", JSON.stringify(articleArr));\r\n}\r\n\r\n// 删除文章\r\narticleTool.delete = (id) => {\r\n    const articles = window.sessionStorage.getItem(\"articles\") ? JSON.parse(window.sessionStorage.getItem(\"articles\")) : [];\r\n    articles.forEach((item, index) => {\r\n        if (item.id === id) articles.splice(index, 1);\r\n    });\r\n    window.sessionStorage.setItem(\"articles\", JSON.stringify(articles));\r\n}\r\n\r\n// 新建文章\r\narticleTool.create = (article) => {\r\n    const articles = window.sessionStorage.getItem(\"articles\") ? JSON.parse(window.sessionStorage.getItem(\"articles\")) : [];\r\n    let targetIndex = -1;\r\n    articles.forEach((item, index) => { // 去重\r\n        if (item.id === article.id) {\r\n            articles.splice(index, 1, article);\r\n            targetIndex = index;\r\n        }\r\n    });\r\n    if (targetIndex === -1) articles.unshift(article);\r\n    window.sessionStorage.setItem(\"articles\", JSON.stringify(articles));\r\n}\r\n\r\n\r\nexport default articleTool;","import React, { Component } from 'react';\r\nimport ArticleBlock from \"../../components/ArticleBlock/ArticleBlock\";\r\nimport { listArticles } from \"../../interfaces/ariticle\";\r\nimport Article from \"../../local/articleUtil\";\r\nimport { setTimeout } from 'timers';\r\n\r\nexport default class componentName extends Component {\r\n\r\n    _UNMOUNTED = false // 组件卸载标记，true表示已卸载\r\n\r\n    state = {\r\n        data: [],\r\n    }\r\n    componentWillUnmount() {\r\n        this._UNMOUNTED = true;\r\n        window._wizard.content_scrollTop = this._articles.scrollTop;\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        console.log(this._articles.offsetHeight)\r\n        console.log(document.getElementsByClassName(\"article-block\")[0])\r\n\r\n\r\n        this.getArticle(1); // 获取第一页\r\n        if(window._wizard.content_scrollTop){\r\n            setTimeout(()=>{this._articles.scrollTo(0,window._wizard.content_scrollTop)},0)\r\n            \r\n        }\r\n    }\r\n\r\n    getArticle = pageNum => {\r\n        if (Article.getList()) {\r\n            this.setState({\r\n                data: Article.getList()\r\n            })\r\n            return;\r\n        }\r\n        listArticles(pageNum).then(res => {\r\n            if (this._UNMOUNTED) return;\r\n            if (res.data.status === \"OK\") { // 请求成功\r\n                Article.save(res.data.result);\r\n                this.setState({\r\n                    data: res.data.result\r\n                })\r\n            }\r\n        })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    render() {\r\n\r\n        \r\n\r\n        return (\r\n            <div className=\"ariticles\" style={{ height: \"100%\", overflowY: \"scroll\" }} ref={_articles => this._articles = _articles}>\r\n                {\r\n                    this.state.data.map((item, index) => {\r\n                        return <ArticleBlock key={item.id} to={\"/article/\" + item.id} {...item} />\r\n                    })\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Timeline, Icon,Tooltip } from 'antd';\r\nimport { listArticles } from \"../../interfaces/ariticle\"\r\nimport Article from \"../../local/articleUtil\";\r\n\r\nimport \"./timeline.scss\";\r\n\r\nexport default class componentName extends Component {\r\n    \r\n    _UNMOUNTED = false;\r\n\r\n    state ={\r\n        data: null\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        this._UNMOUNTED = true;\r\n    }\r\n\r\n    componentDidMount(){ //从本地缓存获取数据\r\n        if(Article.getList()){\r\n            this.setState({\r\n                data:Article.getList()\r\n            })\r\n            return;\r\n        }else{\r\n            // 从服务器获取\r\n            listArticles(1)\r\n                .then(res=>{\r\n                    if(res.data.status === \"OK\"){\r\n                        Article.save(res.data.result)\r\n                        if(this._UNMOUNTED) return; // 请求已过期\r\n                        this.setState({\r\n                            data: res.data.result\r\n                        })\r\n                    }\r\n                })\r\n        }\r\n        \r\n    }\r\n    \r\n    randomColor = () => {\r\n        const color = [\"magenta\",\"red\",\"volcano\",\"orange\",\"gold\",\"lime\",\"green\",\"cyan\",\"blue\",\"geekblue\",\"purple\"]\r\n        return color[Math.floor(Math.random()*color.length)]\r\n    }\r\n    \r\n\r\n    render() {\r\n\r\n        const data = this.state.data;\r\n        \r\n        let date = \"1970-01-01\"; // 样式选择，每天第一篇文章返回一个时钟样式\r\n        \r\n        return (\r\n            <div className=\"timeline\">\r\n                <Timeline mode=\"alternate\">\r\n                    {\r\n                        data && data.map((item,index)=>{\r\n                            const thisDate = item.createdAt.split(\" \")[0];\r\n                            if(thisDate !== date){\r\n                                date = thisDate; // 新一天\r\n                                return(\r\n                                        <Timeline.Item key={item.id} dot={<Tooltip placement=\"bottomRight\" title={thisDate}><Icon type=\"clock-circle-o\" style={{ fontSize: '16px' }} /></Tooltip>}>\r\n                                            {item.title}\r\n                                        </Timeline.Item>\r\n                                )\r\n                            }else{\r\n                                return(\r\n                                    <Timeline.Item key={item.id} color={this.randomColor()}>{item.title}</Timeline.Item>\r\n                                )\r\n                            }\r\n                        })\r\n                    }\r\n                </Timeline>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import Axios from \"axios\";\r\nimport { getCSRF } from \"./user\";\r\n\r\ngetCSRF();\r\n\r\n// 新建标签\r\nexport async function newTag(tagObj) {\r\n    return getCSRF().then(CSRFTOKEN => {\r\n        const form = new FormData();\r\n        for (let field in tagObj) {\r\n            form.append(field, tagObj[field])\r\n        }\r\n        if (!tagObj.createdBy) form.append(\"createdBy\", \"佚名\")\r\n        form.append(\"csrfmiddlewaretoken\", CSRFTOKEN)\r\n        return Axios.post(\"/api/new/tag\", form)\r\n    })\r\n}\r\n\r\n// 获取标签列表\r\nexport async function listTags() {\r\n    return Axios.get(\"/api/list/tags\")\r\n}\r\n\r\n// 删除标签\r\nexport async function delTag(id) {\r\n    return Axios.get(\"/api/del/tag?id=\" + id)\r\n}","const tagTool = {}\r\n\r\n// 通过id从列表中获取标签\r\ntagTool.get = id => {\r\n    let targetId = -1;\r\n    const tags = window.sessionStorage.getItem(\"tags\") ? JSON.parse(window.sessionStorage.getItem(\"tags\")) : [];\r\n    tags.forEach((item, index) => {\r\n        if (item.id === id) targetId = index;\r\n    });\r\n    if (targetId !== -1) return tags[targetId];\r\n    else return null;\r\n}\r\n\r\n// 获取标签列表\r\ntagTool.getList = () => {\r\n    return window.sessionStorage.getItem(\"tags\") ? JSON.parse(window.sessionStorage.getItem(\"tags\")) : null;\r\n}\r\n\r\n// 将标签列表保存起来\r\ntagTool.save = (tagArr) => {\r\n    window.sessionStorage.setItem(\"tags\", JSON.stringify(tagArr));\r\n}\r\n\r\n// 删除标签\r\ntagTool.delete = (id) => {\r\n    const tags = window.sessionStorage.getItem(\"tags\") ? JSON.parse(window.sessionStorage.getItem(\"tags\")) : [];\r\n    tags.forEach((item, index) => {\r\n        if (item.id === id) tags.splice(index, 1);\r\n    });\r\n    window.sessionStorage.setItem(\"tags\", JSON.stringify(tags));\r\n}\r\n\r\n// 新建标签\r\ntagTool.create = (tag) => {\r\n    const tags = window.sessionStorage.getItem(\"tags\") ? JSON.parse(window.sessionStorage.getItem(\"tags\")) : [];\r\n    let targetIndex = -1;\r\n    tags.forEach((item, index) => { // 去重\r\n        if (item.id === tag.id) {\r\n            tags.splice(index, 1, tag);\r\n        }\r\n    });\r\n    if (targetIndex === -1) tags.unshift(tag);\r\n    window.sessionStorage.setItem(\"tags\", JSON.stringify(tags));\r\n}\r\n\r\n\r\nexport default tagTool;","import React, { Component } from 'react';\r\nimport { Tag, Icon, Input, message } from 'antd';\r\nimport { newTag, listTags, delTag } from \"../../interfaces/tags\";\r\nimport TagUtil from \"../../local/tagUtils\"\r\nimport \"./tags.scss\";\r\n\r\nexport default class componentName extends Component {\r\n\r\n    _UNMOUNTED = false; // 组件卸载标记\r\n\r\n    componentWillUnmount(){\r\n        this._UNMOUNTED = true;\r\n    }\r\n\r\n    state = {\r\n        tags: [],\r\n        inputVisible: false,\r\n        inputValue: '',\r\n    }\r\n\r\n    showInput = () => {\r\n        this.setState({ inputVisible: true }, () => this.input.focus());\r\n    };\r\n\r\n    handleInputChange = e => {\r\n        this.setState({ inputValue: e.target.value });\r\n    };\r\n\r\n    handleInputBlur = e => {\r\n        this.setState({ inputVisible: false, inputValue: '' })\r\n    }\r\n\r\n    // 新建tag\r\n    handleInputConfirm = () => {\r\n        const tagName = this.state.inputValue;\r\n        let { tags } = this.state;\r\n        let createdBy;\r\n        if (window.wizard_blog) createdBy = window.wizard_blog.user;\r\n        let newItem = {\r\n            createdBy,\r\n            color: this.getColor(),\r\n            name: tagName\r\n        }\r\n\r\n        newTag(newItem).then(res => {\r\n            if (res.data.status !== \"OK\") { // 创建失败\r\n                throw new Error(res.data.message)\r\n            } else { // 创建成功\r\n                newItem = res.data.result;\r\n                tags = [...tags, newItem]\r\n                TagUtil.create(newItem); // 本地保存\r\n                if(this._UNMOUNTED) return;\r\n                this.setState({\r\n                    tags,\r\n                    inputVisible: false,\r\n                    inputValue: '',\r\n                });\r\n            }\r\n        }).catch(err => {\r\n            console.log(err)\r\n            message.error(\"创建标签失败服务器异常\")\r\n        })\r\n\r\n    };\r\n\r\n    saveInputRef = input => (this.input = input);\r\n\r\n\r\n    // 获取随机颜色\r\n    getColor = () => {\r\n        const table = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'a', 'b', 'c', 'd', 'e', 'f'];\r\n        let randomColor = \"#\";\r\n        for (let i = 0; i < 6; i++) {\r\n            randomColor += table[(Math.floor(Math.random() * 16))]\r\n        }\r\n        return randomColor\r\n    }\r\n\r\n    // 删除tag\r\n    delTag = (id, index, e) => {\r\n        // e.preventDefault();\r\n        delTag(id)\r\n            .then(res => {\r\n                // console.log(res)\r\n                if (res.data.status !== \"OK\") { // 删除失败\r\n                    throw new Error(res.data.message)\r\n                } else {\r\n                    // 删除标签\r\n                    const tags = this.state.tags;\r\n                    tags.splice(index, 1);\r\n                    if(this._UNMOUNTED) return;\r\n                    this.setState({ tags });\r\n                    TagUtil.delete(id); // 本地缓存\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                message.error(err)\r\n            })\r\n    }\r\n\r\n    componentDidMount() {\r\n        // 获取标签数据\r\n        if(TagUtil.getList()){\r\n            this.setState({\r\n                tags: TagUtil.getList()\r\n            })\r\n            return;\r\n        }\r\n        listTags()\r\n            .then(res => {\r\n                if (res.data.status === \"OK\") {\r\n                    if(this._UNMOUNTED) return;\r\n                    this.setState({\r\n                        tags: res.data.result\r\n                    })\r\n                    TagUtil.save(res.data.result)\r\n                } else {\r\n                    throw new Error(res.data.message)\r\n                }\r\n            }).catch(err => {\r\n                console.log(err)\r\n                message.warn(\"服务器异常\")\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const { tags, inputVisible, inputValue } = this.state;\r\n        return (\r\n            <div className=\"tags\">\r\n                <h4 style={{ marginBottom: 16 }}>标签库:</h4>\r\n                <div>\r\n                    <Tag color=\"magenta\">magenta</Tag>\r\n                    <Tag color=\"red\">red</Tag>\r\n                    <Tag color=\"volcano\">volcano</Tag>\r\n                    <Tag color=\"orange\">orange</Tag>\r\n                    <Tag color=\"gold\">gold</Tag>\r\n                    <Tag color=\"lime\">lime</Tag>\r\n                    <Tag color=\"green\">green</Tag>\r\n                    <Tag color=\"cyan\">cyan</Tag>\r\n                    <Tag color=\"blue\">blue</Tag>\r\n                    <Tag color=\"geekblue\">geekblue</Tag>\r\n                    <Tag color=\"purple\">purple</Tag>\r\n                </div>\r\n                <h4 style={{ margin: '16px 0' }}>新建标签:</h4>\r\n                <div>\r\n                    {\r\n                        tags.map((item, index) => {\r\n                            return (<Tag key={item.color} closable onClose={this.delTag.bind(this, item.id, index)} color={item.color}>{item.name}</Tag>)\r\n                        })\r\n                    }\r\n                </div>\r\n                {inputVisible && (\r\n                    <Input\r\n                        ref={this.saveInputRef}\r\n                        type=\"text\"\r\n                        size=\"small\"\r\n                        style={{ width: 78 }}\r\n                        value={inputValue}\r\n                        onChange={this.handleInputChange}\r\n                        onBlur={this.handleInputBlur}\r\n                        onPressEnter={this.handleInputConfirm}\r\n                    />\r\n                )}\r\n                {!inputVisible && (\r\n                    <Tag onClick={this.showInput} style={{ background: '#fff', borderStyle: 'dashed' }}>\r\n                        <Icon type=\"plus\" /> New Tag\r\n                    </Tag>\r\n                )}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import Axios from \"axios\";\r\nimport qs from \"qs\";\r\n\r\n// 获取当日的日志\r\nexport async function listLog() {\r\n    return Axios.get(\"/api/list/log\")\r\n}\r\n\r\n// 获取目标日期范围内的日志列表\r\nexport async function getLogs(datestring) {\r\n    return Axios.get(\"/api/get/logs\",\r\n        {\r\n            params: {\r\n                datestring: datestring\r\n            },\r\n            paramsSerializer: function (params) {\r\n                return qs.stringify(params, { arrayFormat: 'repeat' })\r\n            }\r\n        }\r\n    )\r\n}","const logTool = {}\r\n\r\n// 获取标签列表\r\nlogTool.getList = () => {\r\n    return window.sessionStorage.getItem(\"logs\") ? JSON.parse(window.sessionStorage.getItem(\"logs\")) : null;\r\n}\r\n\r\n// 将标签列表保存起来\r\nlogTool.save = (logArr) => {\r\n    window.sessionStorage.setItem(\"logs\", JSON.stringify(logArr));\r\n}\r\n\r\n// 删除标签\r\nlogTool.delete = (id) => {\r\n    const logs = window.sessionStorage.getItem(\"logs\") ? JSON.parse(window.sessionStorage.getItem(\"logs\")) : [];\r\n    logs.forEach((item, index) => {\r\n        if (item.id === id) logs.splice(index, 1);\r\n    });\r\n    window.sessionStorage.setItem(\"logs\", JSON.stringify(logs));\r\n}\r\n\r\n\r\nexport default logTool;","import React, { Component } from 'react';\r\nimport { listLog, getLogs } from \"../../interfaces/logs\";\r\nimport { Divider, DatePicker } from \"antd\";\r\nimport Log from \"../../local/logUtil\";\r\n\r\nimport \"./logs.scss\";\r\n\r\nexport default class componentName extends Component {\r\n\r\n    _UNMOUNTED = false\r\n\r\n    state = {\r\n        data: [],\r\n        history: []\r\n    }\r\n\r\n    componentWillMount() {\r\n        if(Log.getList()){ // 首先尝试从本地缓存读取\r\n            return this.setState({\r\n                data:Log.getList()\r\n            })\r\n        }\r\n        listLog() // 从服务器读取\r\n            .then(res => {\r\n                if (res.data.status === \"OK\") {\r\n                    Log.save(res.data.result); // 保存缓存\r\n                    if (this._UNMOUNTED) return;\r\n                    // 请求成功\r\n                    this.setState({\r\n                        data: res.data.result,\r\n                        history: res.data.dir\r\n                    })\r\n                }\r\n\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const { RangePicker } = DatePicker;\r\n        let thisIp = -1; // 初始化人员计数\r\n        return (\r\n            <div className=\"logs\">\r\n                <div className=\"history\">\r\n                    <div>\r\n                        <RangePicker onChange={this.onChange} />\r\n                    </div>\r\n                </div>\r\n                {\r\n                    this.state.data.map((item, index) => {\r\n                        const reg = /(?<ip>\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}.\\d{1,3}):\\[(?<timestamp>[\\d-:\\s]+)\\] (?<computerName>[\\S-]+) (?<os>\\S+) (?<method>\\S+) (?<path>\\S+)/;\r\n                        const result = reg.exec(item).groups;\r\n                        const ip = result.ip;\r\n                        const timestamp = result.timestamp;\r\n                        const computerName = result.computerName;\r\n                        const os = result.os;\r\n                        const method = result.method;\r\n                        const path = result.path;\r\n\r\n                        const logItem = (\r\n                            <div key={timestamp+index+\"\"} className=\"log-item\">\r\n                                <span className=\"item\">[<span className=\"timestamp\">{timestamp}</span>]</span>\r\n                                <span className=\"item computer-name\">{computerName}</span>\r\n                                <span className=\"item os\">{os}</span>\r\n                                <span className=\"item method\">{method}</span>\r\n                                <span className=\"item path\">{path}</span>\r\n                            </div>\r\n                        )\r\n\r\n                        if (thisIp === ip) return logItem\r\n                        else {\r\n                            thisIp = ip;\r\n                            return (\r\n                                <div className=\"log-item\" key={timestamp+index+\"\"}>\r\n                                    <Divider />\r\n                                    <div className=\"ip\">{thisIp}</div>\r\n                                    {logItem}\r\n                                </div>\r\n                            )\r\n                        }\r\n                    })\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n    onChange = (date, dateString) => {\r\n        // console.log(new Date(dateString[0]) , new Date(dateString[1]))\r\n        getLogs(dateString)\r\n            .then(res=>{\r\n                // console.log(res)\r\n                if(this._UNMOUNTED) return;\r\n                if(res.data.status===\"OK\"){\r\n                    // 请求成功\r\n                    this.setState({data:res.data.result})\r\n                }\r\n            })\r\n            .catch(err=>{\r\n                console.log(err)\r\n            })\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { markCode } from \"../../interfaces/ariticle\";\r\nimport Article from \"../../local/articleUtil\";\r\n// import Login from \"../../components/Login/Login\";\r\nimport \"./article.scss\";\r\n\r\nexport default class componentName extends Component {\r\n\r\n    toTop = ()=>{\r\n        const content = this._article.parentNode;\r\n        content.scrollTop = 0;\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        const articleId = parseInt(this.props.match.params.id);\r\n        const article = Article.get(articleId);\r\n\r\n        return (\r\n            <div className=\"article\" ref={_article => this._article = _article}>\r\n                <div className=\"post\">\r\n                    <div className=\"post-info\">\r\n                        <span>Written by</span>\r\n                        {article.author}\r\n                        <br />\r\n                        <span>on&nbsp;</span><time>{article.createdAt}</time>\r\n                    </div>\r\n\r\n                    <h1 className=\"post-title\">{article.title}</h1>\r\n                    <div className=\"post-line\"></div>\r\n\r\n                    <div className=\"content-preview\" dangerouslySetInnerHTML={{__html:markCode(article.content)}} >\r\n                    </div>\r\n\r\n                </div>\r\n                {/* <Login></Login> */}\r\n                <div className=\"pagination\">\r\n                    <span className=\"top\" onClick={this.toTop}>Top</span>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport \"./bar.scss\";\r\n\r\nexport default class componentName extends Component {\r\n\r\n    state = {\r\n        showBar:false,\r\n        barHeight:0\r\n    }\r\n\r\n\r\n    shouldComponentUpdate(nextProps,nextStates){\r\n        const {box,text} = nextProps;\r\n        \r\n        // 获取文本域的高度\r\n        const scrollHeight = text.scrollHeight;\r\n        const viewPortHeight = parseInt(getComputedStyle(box).height);\r\n\r\n        // 滚动高度小于视口高度时不需要滚动条，否则显示滚动条\r\n        if(scrollHeight <= viewPortHeight){\r\n            text.onmousewheel = null;\r\n            text.style.top = 0;\r\n            return this.setState({\r\n                showBar:false\r\n            })\r\n        }else{\r\n            this.setState({\r\n                showBar:true\r\n            })\r\n        }\r\n        if(!this._bar) return false;\r\n        // 计算滚动条高度\r\n        const barHeight = viewPortHeight * viewPortHeight / scrollHeight;\r\n        \r\n        const pre_barHeight = this.state.barHeight;\r\n        \r\n        if( barHeight === pre_barHeight ) return false; // 高度没有变化，不更新\r\n        this.setState({ // 高度发生变化\r\n            barHeight\r\n        })\r\n\r\n        const bar = this._bar;\r\n        const maxTop = viewPortHeight - barHeight;\r\n\r\n        // 滚轮事件\r\n        text.onmousewheel = function (e) {\r\n            e.preventDefault();\r\n            // 上下每次页面位移100px\r\n            \r\n            const barTop = parseInt(getComputedStyle(bar).top); // 滚动条初始位置\r\n            const newBarTop = barTop + viewPortHeight * e.deltaY / scrollHeight;\r\n            if( newBarTop > maxTop){ // 下界\r\n                text.style.top = -( scrollHeight - viewPortHeight ) + \"px\";\r\n                bar.style.top = maxTop + \"px\";\r\n                return;\r\n            }else if( newBarTop < 0 ){ // 上界\r\n                text.style.top = 0;\r\n                bar.style.top = 0;\r\n                return;\r\n            }\r\n\r\n            text.style.top = parseInt(getComputedStyle(text).top) - e.deltaY + \"px\";\r\n            // 计算滚动条比例\r\n            bar.style.top = newBarTop + \"px\";\r\n            box.scrollTop = 0;\r\n        }\r\n\r\n\r\n        // 鼠标拖动滚动条事件\r\n        bar.onmousedown = function(e) {\r\n            const startY = e.clientY; // 起始位置\r\n            const barTop = parseInt(getComputedStyle(bar).top);\r\n\r\n            // 解绑事件\r\n            document.onmouseup = function(){\r\n                document.onmousemove = null;\r\n                document.onmouseup = null;\r\n            }\r\n            \r\n            // 绑定事件\r\n            document.onmousemove = function (e) {\r\n                e.preventDefault();\r\n                // 解绑事件\r\n                const viewPortWidth = document.body.clientX;\r\n                if (e.clientX < 0 || e.clientX > viewPortWidth || e.clientY > viewPortHeight || e.clientY < 0) {// 鼠标离开视口\r\n                    document.onmousemove = null;\r\n                    document.onmouseup = null;\r\n                    return;\r\n                }\r\n\r\n                const endY = e.clientY; // 移动中的末位置\r\n                const deltaY = endY - startY; // 变化值 δ<0 表示向上 ，δ>0 表示向下\r\n\r\n                const endPos = barTop + deltaY;\r\n                \r\n                // 滚轮表示已经拉到了极点\r\n                if(endPos < 0 ){ // 上边界\r\n                    text.style.top = 0;\r\n                    bar.style.top = 0;\r\n                    return; \r\n                }else if(endPos > maxTop){ // 下边界\r\n                    text.style.top = ( viewPortHeight - scrollHeight) +\"px\";\r\n                    bar.style.top = maxTop + \"px\";\r\n                    return; \r\n                }\r\n                \r\n                // 改变滚动条位置\r\n                bar.style.top = endPos+\"px\";\r\n\r\n                // 计算等比例的barTop对应的textTop\r\n                const textTop = (scrollHeight -  viewPortHeight) * (barTop + deltaY) / maxTop\r\n                text.style.top = - textTop +\"px\";\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div className=\"slide\" ref={_slide => this._slide = _slide} onClick={this.test}>\r\n                {\r\n                    this.state.showBar && <div className=\"bar\" style={{height:this.state.barHeight}} ref={_bar => this._bar = _bar}></div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Button } from \"antd\";\r\nimport Bar from \"../Bar/Bar\";\r\nimport marked from \"marked\";\r\nimport 'highlight.js/styles/atom-one-light.css';\r\nimport \"./editor.scss\";\r\nimport \"./markdown.scss\";\r\n\r\nexport default class Article extends Component {\r\n\r\n    state = {\r\n        article: \"\",\r\n    }\r\n\r\n    componentDidMount() {\r\n        // marked相关配置\r\n        marked.setOptions({\r\n            renderer: new marked.Renderer(),\r\n            highlight: function(code) {\r\n              return require('highlight.js').highlightAuto(code).value;\r\n            },\r\n            pedantic: false,\r\n            gfm: true,\r\n            tables: true,\r\n            breaks: false,\r\n            sanitize: false,\r\n            smartLists: true,\r\n            smartypants: false,\r\n            xhtml: false\r\n          });\r\n\r\n        this._editor_box.onclick = e => {\r\n            this._editor_textarea.focus();\r\n        }\r\n\r\n        window._wizard.disableMenu();\r\n\r\n    }\r\n\r\n    textChange = e => {\r\n        /* \r\n            输入文本时：\r\n            - 调整textarea高度\r\n            - 超出视口高度则显示滚动条\r\n        */\r\n        // 编辑区\r\n        const otextarea = this._editor_textarea;\r\n        otextarea.style.height = \"auto\";\r\n        otextarea.scrollTop = 0;\r\n        otextarea.style.height = otextarea.scrollHeight + \"px\";\r\n        this.setState({\r\n            article: marked(e.target.value),\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"editor\">\r\n\r\n                <div className=\"tools\">\r\n                    <i>不要吹灭你的灵感和你的想象力; 不要成为你的模型的奴隶。 ——文森特・梵高</i>\r\n                    <Button type=\"primary\">保存</Button>\r\n                </div>\r\n\r\n                <div className=\"content-box\" ref={_out => this._out = _out}>\r\n                    \r\n                    <div className=\"editor-box\" ref={_text => this._editor_box = _text}>\r\n                        <textarea name=\"content\" onChange={this.textChange} ref={_text => this._editor_textarea = _text} />\r\n                        <Bar box={this._editor_box} text={this._editor_textarea} />\r\n                    </div>\r\n\r\n                    <div className=\"preview\" ref={_preview => this._preview = _preview}>\r\n                        <div className=\"content-preview\" ref={_preview_con => this._preview_con = _preview_con} dangerouslySetInnerHTML={{ __html: this.state.article }} />\r\n                        <Bar box={this._preview} text={this._preview_con} />\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport codemirror from 'codemirror'\r\nimport PropTypes from 'prop-types'\r\nimport isEqual from 'lodash.isequal'\r\nimport debounce from 'lodash.debounce'\r\n\r\nfunction normalizeLineEndings (str) {\r\n\tif (!str) return str\r\n\treturn str.replace(/\\r\\n|\\r/g, '\\n')\r\n}\r\n\r\nlet CodemirrorHandler = null\r\n\r\nexport default class ReactCodeMirror extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      isFocused: false\r\n    }\r\n  }\r\n\tcomponentWillMount () {\r\n\t\tthis.componentWillReceiveProps = debounce(this.componentWillReceiveProps, 0)\r\n\t\tif (this.props.path) {\r\n\t\t\tconsole.error('Warning: react-codemirror: the `path` prop has been changed to `name`')\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount () {\r\n\t\tthis.codeMirror = codemirror.fromTextArea(this.textareaNode, this.props.options)\r\n\t\tCodemirrorHandler = this.codeMirror\r\n\t\tCodemirrorHandler.on('change', this.codemirrorValueChanged.bind(this))\r\n\t\tCodemirrorHandler.on('cursorActivity', this.cursorActivity.bind(this))\r\n\t\tCodemirrorHandler.on('focus', this.focusChanged.bind(this, true))\r\n\t\tCodemirrorHandler.on('blur', this.focusChanged.bind(this, false))\r\n\t\tCodemirrorHandler.on('scroll', this.scrollChanged.bind(this))\r\n\t\tCodemirrorHandler.setValue(this.props.defaultValue || this.props.value || '')\r\n\t}\r\n\tcomponentWillUnmount () {\r\n\t\tif (this.codeMirror) {\r\n\t\t\tthis.codeMirror.toTextArea()\r\n\t\t}\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (this.codeMirror && nextProps.value !== undefined && nextProps.value !== this.props.value && normalizeLineEndings(this.codeMirror.getValue()) !== normalizeLineEndings(nextProps.value)) {\r\n\t\t\tif (this.props.preserveScrollPosition) {\r\n\t\t\t\tvar prevScrollPosition = this.codeMirror.getScrollInfo()\r\n\t\t\t\tthis.codeMirror.setValue(nextProps.value)\r\n\t\t\t\tthis.codeMirror.scrollTo(prevScrollPosition.left, prevScrollPosition.top)\r\n\t\t\t} else {\r\n\t\t\t\tthis.codeMirror.setValue(nextProps.value)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (typeof nextProps.options === 'object') {\r\n\t\t\tfor (let optionName in nextProps.options) {\r\n\t\t\t\tif (nextProps.options.hasOwnProperty(optionName)) {\r\n\t\t\t\t\tthis.setOptionIfChanged(optionName, nextProps.options[optionName])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsetOptionIfChanged (optionName, newValue) {\r\n \t\tconst oldValue = this.codeMirror.getOption(optionName)\r\n \t\tif (!isEqual(oldValue, newValue)) {\r\n \t\t\tthis.codeMirror.setOption(optionName, newValue)\r\n \t\t}\r\n \t}\r\n\tgetCodeMirror () {\r\n\t\treturn this.codeMirror\r\n\t}\r\n\tfocus () {\r\n\t\tif (this.codeMirror) {\r\n\t\t\tthis.codeMirror.focus()\r\n\t\t}\r\n\t}\r\n\tfocusChanged (focused) {\r\n\t\tthis.setState({\r\n\t\t\tisFocused: focused,\r\n\t\t})\r\n\t\tthis.props.onFocusChange && this.props.onFocusChange(focused)\r\n\t}\r\n\tcursorActivity (cm) {\r\n\t\tthis.props.onCursorActivity && this.props.onCursorActivity(cm)\r\n\t}\r\n\tscrollChanged (cm) {\r\n\t\tthis.props.onScroll && this.props.onScroll(cm.getScrollInfo())\r\n\t}\r\n\tcodemirrorValueChanged (doc, change) {\r\n\t\tif (this.props.onChange && change.origin !== 'setValue') {\r\n\t\t\tthis.props.onChange(doc.getValue(), change)\r\n\t\t}\r\n\t}\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t<div className={this.props.className ? 'ReactCodeMirror '+this.props.className : 'ReactCodeMirror'}>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tref={ref => this.textareaNode = ref}\r\n\t\t\t\t\tname={this.props.name || this.props.path}\r\n\t\t\t\t\tdefaultValue={this.props.value}\r\n\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\tautoFocus={this.props.autoFocus}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport {\r\n\tCodemirrorHandler\r\n}\r\n\r\nReactCodeMirror.propTypes = {\r\n  autoFocus: PropTypes.bool,\r\n  className: PropTypes.any,\r\n  codeMirrorInstance: PropTypes.func,\r\n  defaultValue: PropTypes.string,\r\n  name: PropTypes.string,\r\n  onChange: PropTypes.func,\r\n  onCursorActivity: PropTypes.func,\r\n  onFocusChange: PropTypes.func,\r\n  onScroll: PropTypes.func,\r\n  options: PropTypes.object,\r\n  path: PropTypes.string,\r\n  value: PropTypes.string,\r\n  preserveScrollPosition: PropTypes.bool\r\n}\r\n\r\nReactCodeMirror.defaultProps = {\r\n  preserveScrollPosition: false\r\n}\r\n","import React from 'react'\r\nimport marked from 'marked'\r\nimport { Popover, Button, Select, message, Input } from \"antd\"\r\nimport highlight from 'highlight.js'\r\nimport { newArticle } from '../../interfaces/ariticle'\r\nimport { listTags } from \"../../interfaces/tags\"\r\nimport Tag from \"../../local/tagUtils\"\r\nimport Article from \"../../local/articleUtil\"\r\n\r\n\r\nimport CodemirrorEditor, {CodemirrorHandler} from '../CodemirrorEditor'\r\n\r\nimport 'codemirror/lib/codemirror.css'\r\nimport 'codemirror/theme/solarized.css'\r\n// 搜索 Ctrl-F (PC), Cmd-F (Mac)\r\n// 搜索的上一个结果 Shift-Ctrl-G (PC), Shift-Cmd-G (Mac)\r\n// 搜索的下一个结果 Ctrl-G (PC), Cmd-G (Mac)\r\n// 替换(replace)   Shift-Ctrl-F (PC), Cmd-Alt-F (Mac)\r\n// 替换全部(replaceAll)   Shift-Ctrl-R (PC), Shift-Cmd-Alt-F (Mac)\r\nimport 'codemirror/addon/search/search'\r\n// 光标跳到第几行 Alt-G，例如输入 9:26，则光标定位到第9行第26列\r\nimport 'codemirror/addon/search/jump-to-line'\r\n// 搜索或者跳转行数出现的弹出框样式\r\nimport 'codemirror/addon/dialog/dialog.css'\r\n// 当输入 '>' 或 '/' 字符的时候, 自动关闭标签\r\nimport 'codemirror/addon/edit/closetag'\r\n// 当光标定位于编辑器内，并且按 F11的时候编辑框全屏\r\nimport 'codemirror/addon/display/fullscreen'\r\n// 全屏样式\r\nimport 'codemirror/addon/display/fullscreen.css'\r\n\r\nimport 'codemirror/mode/javascript/javascript'\r\nimport 'codemirror/mode/jsx/jsx'\r\nimport 'codemirror/mode/css/css'\r\nimport 'codemirror/mode/sass/sass'\r\nimport 'codemirror/mode/xml/xml'\r\nimport 'codemirror/mode/markdown/markdown'\r\n\r\n// import '../../statics/style/common.css')\r\nimport \"../../statics/style/common.scss\"\r\nimport '../../statics/style/js-highlight.css'\r\nimport './style.scss'\r\n\r\nhighlight.configure({\r\n  tabReplace: '  ',\r\n  classPrefix: 'hljs-',\r\n  languages: ['CSS', 'HTML, XML', 'JavaScript', 'PHP', 'Python', 'Stylus', 'TypeScript', 'Markdown']\r\n})\r\nmarked.setOptions({\r\n  highlight (code) {\r\n    return highlight.highlightAuto(code).value\r\n  }\r\n})\r\n\r\nexport default class EditorC extends React.Component {\r\n\r\n  _UNMOUNTED = false;\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      aceBoxH: null,\r\n      rawContent:'',\r\n      previewContent: '',\r\n      tags:[],\r\n      tagSelected:\"\",\r\n      currentTabIndex: 1,\r\n      hasContentChanged: false,\r\n      scale: 1\r\n    }\r\n    this.CodemirrorOptions = {\r\n      lineNumbers: false,\r\n      theme: 'solarized',\r\n      tabSize: 2,\r\n      lineWrapping: true,\r\n\t\t\treadOnly: false,\r\n      mode: 'markdown',\r\n      // 是否自动闭合标签，基于 codemirror/addon/edit/closetag\r\n      autoCloseTags: true,\r\n      // 自定义快捷键\r\n      extraKeys: this.setExtraKeys()\r\n    }\r\n  }\r\n\trender () {\r\n    let state = this.state;\r\n    const { Option } = Select;\r\n    \r\n    const popContent = (\r\n      <div className=\"pop-over\">\r\n        <Input placeholder=\"署名\" ref={_author => this._author = _author}/>\r\n        <Select\r\n          showSearch\r\n          style={{width:\"100%\"}}\r\n          placeholder={\"标签\"}\r\n          defaultActiveFirstOption={false}\r\n          showArrow={false}\r\n          filterOption={false}\r\n          onSearch={this.handleSearch}\r\n          onChange={this.handleChange}\r\n          notFoundContent={\"输入内容以新建\"}\r\n        >\r\n          {this.state.tags.map((item,index) => <Option key={item.id}>{item.name}</Option>)}\r\n        </Select>\r\n        <Button type=\"primary\" onClick={this.newArticle}>确认</Button>\r\n      </div>\r\n    );\r\n    return [\r\n      <header className=\"edit-header\" key='header'>\r\n        <input type=\"text\" className=\"title-input\" placeholder=\"不要吹灭你的灵感和你的想象力; 不要成为你的模型的奴隶。 ——文森特・梵高\" spellCheck=\"false\" ref={_title=>this._title=_title}/>\r\n        <Popover className=\"save-button\" content={popContent} title=\"biu biu biu\" trigger=\"click\" placement=\"bottomRight\">\r\n          <Button>保存</Button>\r\n        </Popover>\r\n      </header>,\r\n      <div className=\"editor-main-c\" ref={node=>this.aceBox = node} style={{height: state.editorBoxH + 'px'}} key='main'>\r\n        <div className=\"common-container editor-container\" onMouseOver={this.setCurrentIndex.bind(this, 1)} ref={node=>this.editContainer=node}>\r\n          {\r\n            state.editorBoxH &&\r\n            <CodemirrorEditor\r\n              ref=\"editor\"\r\n              onScroll={this.containerScroll.bind(this, 1)}\r\n              onChange={this.updateCode.bind(this)}\r\n              options={this.CodemirrorOptions}\r\n              autoFocus={true}/>\r\n          }\r\n        </div>\r\n        <div className=\"common-container preview-container\" ref={node=>this.previewContainer=node} onMouseOver={this.setCurrentIndex.bind(this, 2)} onScroll={this.containerScroll.bind(this, 2)}>\r\n          <div className=\"markdown-body preview-wrapper\" dangerouslySetInnerHTML={{__html: state.previewContent}} ref={node=>this.previewWrap=node}></div>\r\n        </div>\r\n      </div>\r\n    ]\r\n  }\r\n  componentWillUnmount(){\r\n    this._UNMOUNTED = true;\r\n    window._wizard.enableMenu();\r\n  }\r\n\r\n  componentDidMount() {\r\n    window._wizard.disableMenu();\r\n    this.setState({\r\n      editorBoxH: document.documentElement.clientHeight - document.querySelector('.edit-header').offsetHeight\r\n    })\r\n    // 获取标签列表\r\n    if(Tag.getList()){ // 本地获取\r\n      this.setState({\r\n        tags:Tag.getList()\r\n      })\r\n      return;\r\n    }else{ // 服务器获取\r\n      listTags()\r\n        .then(res => {\r\n          if(this._UNMOUNTED) return;\r\n          if(res.data.status === \"OK\"){\r\n            this.setState({\r\n              tags:res.data.result\r\n            })\r\n          }else{\r\n            throw new Error(res.data.message)\r\n          }\r\n        }).catch(err => {\r\n          message.error(err)\r\n        })\r\n    }\r\n  }\r\n\r\n  setCurrentIndex(index) {\r\n    this.setState({\r\n      currentTabIndex: index\r\n    })\r\n  }\r\n\r\n  containerScroll(index, e) {\r\n    let state = this.state\r\n    state.hasContentChanged && this.setScrollValue()\r\n    if (state.currentTabIndex === 1 && index === 1) {\r\n      this.previewContainer.scrollTop = e.top * state.scale\r\n    } else if(state.currentTabIndex === 2 && index === 2) {\r\n      CodemirrorHandler.scrollTo(null, this.previewContainer.scrollTop / state.scale)\r\n    }\r\n  }\r\n\r\n  setScrollValue() {\r\n    // 设置值，方便 scrollBy 操作\r\n    // 两个容器元素的高度是相同的\r\n    let containerH = this.previewContainer.offsetHeight\r\n    this.setState({\r\n      scale: (this.previewWrap.offsetHeight - containerH) / (CodemirrorHandler.getScrollInfo().height - containerH),\r\n      hasContentChanged: false\r\n    })\r\n  }\r\n  \r\n  updateCode(newCode) {\r\n    this.setState({\r\n      rawContent:newCode,\r\n      previewContent: marked(newCode)\r\n    })\r\n    !this.state.hasContentChanged && (this.setState({hasContentChanged: true}))\r\n  }\r\n  \r\n  setExtraKeys() {\r\n    // 自定义快捷键\r\n    const that = this\r\n    let appendTxtFn = ()=> {\r\n      let resultObj = {}\r\n      let key2Command = [\r\n        { name: 'Ctrl-H', value: '## ', offset: 0 },\r\n        { name: 'Ctrl-B', value: '**', offset: 1 },\r\n        { name: 'Ctrl-K', value: '[]()', offset: 3 },\r\n        { name: 'Alt-K', value: '``', offset: 1 },\r\n        { name: 'Alt-C', value: '```js\\n\\n```', offset: 0, offsetLine: 1 },\r\n        { name: 'Alt-I', value: '![alt]()', offset: 1 },\r\n        { name: 'Alt-L', value: '* ', offset: 0 }\r\n      ]\r\n      key2Command.forEach((item, index)=>{\r\n        resultObj[item.name] = (cm)=> {\r\n          that.setCursor(cm, item.value, item.offset, item.offsetLine)\r\n        }\r\n      })\r\n      return resultObj\r\n    }\r\n    let otherKeys = {\r\n      'F11'(cm) {\r\n        // 全屏\r\n        cm.setOption('fullScreen', !cm.getOption('fullScreen'))\r\n      },\r\n      'Esc'(cm) {\r\n        // 退出全屏\r\n        if (cm.getOption('fullScreen')) cm.setOption('fullScreen', false)\r\n      }\r\n    }\r\n    return Object.assign(otherKeys, appendTxtFn())\r\n  }\r\n\r\n  setCursor(cm, appendValue, offset = 0, offsetLine = 0) {\r\n    let newValue = cm.getValue() + appendValue\r\n    cm.setValue(newValue)\r\n    let lastLine = cm.lastLine() - offsetLine\r\n    cm.setCursor(lastLine, cm.getLine(lastLine).length - offset)\r\n    this.updateCode(newValue)\r\n  }\r\n\r\n\r\n  // 保存文章动作\r\n  newArticle = () => {\r\n    const newItem = {\r\n      author : this._author.value,\r\n      tagId : this.state.tagSelected,\r\n      title : this._title.value,\r\n      content: this.state.rawContent\r\n    }\r\n    newArticle(newItem)\r\n      .then(res=>{\r\n        // console.log(res)\r\n        if(res.data.status===\"OK\"){\r\n          message.success(\"发表成功\")\r\n          Article.create(res.data.result);\r\n          this.props.history.push(\"/\")\r\n        }\r\n      })\r\n\r\n  }\r\n\r\n  // 标签搜索\r\n  handleSearch = value => {\r\n    // console.log(\">>>\",value)\r\n\r\n    // if (value) {\r\n    //   fetch(value, data => this.setState({ data }));\r\n    // } else {\r\n    //   this.setState({ data: [] });\r\n    // }\r\n  };\r\n\r\n  // 标签变化\r\n  handleChange = value => {\r\n    this.setState({\r\n      tagSelected:value\r\n    })\r\n  };\r\n\r\n  \r\n}","import React, { Component } from 'react';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport Blogs from \"../Blogs/Blogs\";\r\nimport TimeLine from \"../TimeLine/TimeLine\";\r\nimport Tags from \"../Tags/Tags\";\r\nimport Logs from \"../Logs/Logs\";\r\nimport Article from \"../../components/Article/Article\";\r\nimport Editor from \"../../components/Editor/Editor\";\r\nimport EditorC from \"../../components/EditorC\";\r\nimport \"./content.scss\";\r\n\r\nexport default class Right extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"content\">\r\n                <Switch>\r\n                    <Route exact path='/' component={Blogs}/>\r\n                    <Route path='/timeline' component={TimeLine}/>\r\n                    <Route path='/tags' component={Tags}/>\r\n                    <Route path='/logs' component={Logs}/>\r\n                    <Route path='/article/:id' component={Article}/>\r\n                    <Route path='/editor' component={Editor}/>\r\n                    <Route path='/editorc' component={EditorC}/>\r\n                </Switch>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { Avatar , Tooltip } from 'antd';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { getUser } from \"../../interfaces/user\"\r\n\r\nimport \"./sidebar.scss\";\r\n\r\nexport default class Left extends Component {\r\n\r\n    state = {\r\n        nikeName: \"我是...\"\r\n    }\r\n\r\n    // 向左收起菜单页\r\n    foldMenu() {\r\n        const oleft = this._left;\r\n        oleft.style.width = \"25vw\";// 横屏设备始终保持菜单显示\r\n        // 将content页色调恢复调亮\r\n        const ocontent = document.getElementsByClassName(\"content\")[0];\r\n        ocontent.style.transitionDuration = \"0.5s\";\r\n        ocontent.style.backgroundColor = \"rgba(238, 205, 168, 0.2)\";\r\n    }\r\n\r\n    // 向右展开菜单页\r\n    unfoldMenu() {\r\n        const oleft = this._left;\r\n        oleft.style.width = \"100vw\";\r\n        // 将content页色调调暗\r\n        const ocontent = document.getElementsByClassName(\"content\")[0];\r\n        ocontent.style.transitionDuration = \"0.5s\";\r\n        ocontent.style.backgroundColor = \"rgba(102, 90, 77, 0.5)\";\r\n    }\r\n\r\n    // 左右方向的展开或收起\r\n    lrMenu(e, startX) {\r\n        const oleft = this._left;\r\n        document.onmousemove = null;\r\n        oleft.onmouseup = null;\r\n        // 判断左划、右划，左划收起，右划展开\r\n        oleft.style.transitionDuration = \"0.5s\";\r\n        const endX = e.clientX;\r\n        if (endX <= startX) { // 左划、收起\r\n            this.foldMenu() // 横屏设备始终保持菜单显示\r\n        } else { // 右划、展开\r\n            this.unfoldMenu()\r\n        }\r\n    }\r\n\r\n    // 下拉菜单到底部\r\n    pullMenu() {\r\n        const oleft = this._left;\r\n        oleft.style.top = 0;\r\n        // 将content页色调调暗\r\n        const ocontent = document.getElementsByClassName(\"content\")[0];\r\n        ocontent.style.backgroundColor = \"rgba(102, 90, 77, 0.5)\";\r\n    }\r\n\r\n    // 上拉菜单到顶部\r\n    liftMenu() {\r\n        const oleft = this._left;\r\n        oleft.style.top = \"-99vh\";\r\n        // 将content页色调恢复明亮\r\n        const ocontent = document.getElementsByClassName(\"content\")[0];\r\n        ocontent.style.backgroundColor = \"rgba(238, 205, 168, 0.2)\";\r\n    }\r\n\r\n    btMenu(e, startY) {\r\n        const oleft = this._left;\r\n        document.onmousemove = null;\r\n        oleft.onmouseup = null;\r\n        oleft.style.transitionDuration = \"0.5s\";\r\n        const endY = e.clientY;\r\n        if (startY < endY) {// 下滑,打开菜单\r\n            this.pullMenu()\r\n        } else { //上滑\r\n            this.liftMenu()\r\n        }\r\n    }\r\n\r\n    // 向右隐藏菜单，打开编辑器\r\n    hideMenu = e =>{\r\n        const oleft = this._left;\r\n        const ocontent = document.getElementsByClassName(\"content\")[0];\r\n        ocontent.style.left = \"0\";\r\n        ocontent.style.width = \"100vw\";\r\n        ocontent.style.backgroundColor = \"rgba(238, 205, 168, 0.2)\";\r\n        oleft.style.width = \"0vw\";\r\n    }\r\n\r\n\r\n\r\n    // 禁用菜单\r\n    disableMenu = e =>{\r\n        window.onmousewheel = null; // 锁定菜单\r\n        this.hideMenu();\r\n    }\r\n\r\n    // 激活菜单\r\n    enableMenu = e=>{\r\n        const viewPortWidth = document.body.clientWidth;\r\n        const viewPortHeight = document.body.clientHeight;\r\n        const ocontent = document.getElementsByClassName(\"content\")[0];\r\n        if (viewPortHeight <= viewPortWidth) {\r\n            // 横屏\r\n            this._left.style.transitionDuration=\"0.3s\";\r\n            this._left.style.width = \"25vw\";\r\n            this.foldMenu(); // 向左收起菜单\r\n            ocontent.style.left=\"25vw\";\r\n            ocontent.style.width=\"75vw\";\r\n        }else{\r\n            this._left.style.width = \"100vw\";\r\n            this.liftMenu();//上拉菜单到顶部\r\n            ocontent.style.left=\"0\";\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        // 将封装好的事件存储到window对象下，供其他组件使用\r\n        window._wizard = { disableMenu:this.disableMenu,enableMenu:this.enableMenu,hideMenu:this.hideMenu,pullMenu:this.pullMenu,liftMenu:this.liftMenu,foldMenu:this.foldMenu,unfoldMenu:this.unfoldMenu }\r\n        this.bindEvent()\r\n        // 获取昵称\r\n        getUser(79328210)\r\n            .then(res => {\r\n                this.setState({\r\n                    nikeName: res.data.message\r\n                })\r\n                window._wizard.user = res.data.message\r\n            })\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"side-bar\" ref={left => this._left = left}>\r\n                <div className=\"sidebar-bg\">\r\n                    <ul className=\"sidebar-nav\">\r\n                        <li className=\"avatar\"><Avatar size={64} src={\"http://q1.qlogo.cn/g?b=qq&nk=79328210&s=100\"} /></li>\r\n                        <li className=\"sign\"><span><a href=\"http://wizardj.cn\">{this.state.nikeName}</a></span></li>\r\n                        <li className=\"motto\"><span>\"God was never on your side\"</span></li>\r\n                        <li className=\"hover-bottom\"><NavLink to=\"/\">博文</NavLink></li>\r\n                        <li className=\"hover-bottom\"><NavLink to=\"/timeline\">归档</NavLink></li>\r\n                        <li className=\"hover-bottom\"><NavLink to=\"/tags\">标签</NavLink></li>\r\n                        <li className=\"hover-bottom\"><NavLink to=\"/logs\">日志</NavLink></li>\r\n                        <li className=\"hover-bottom\" onClick={this.openEditor}><NavLink to=\"/editorc\">写文章</NavLink></li>\r\n                    </ul>\r\n                    <ul className=\"sidebar-social\">\r\n                        <li>\r\n                            <Tooltip  placement=\"bottomLeft\" title={\"花费挺贵的，发邮件就好...\"}>\r\n                                <div>\r\n                                    <i className=\"iconfont icon-Blog\"></i>\r\n                                </div>\r\n                            </Tooltip >\r\n                        </li>\r\n                        <li>\r\n                            <Tooltip  placement=\"bottom\" title={\"邮箱：79328210@qq.com\"}>\r\n                                <div>\r\n                                    <i className=\"iconfont icon-email\"></i>\r\n                                </div>\r\n                            </Tooltip >\r\n                        </li>\r\n                        <li>\r\n                            <Tooltip  placement=\"bottomRight\" title={\"掘金社区\"}>\r\n                                <a href=\"https://juejin.im/user/5d2d8a2351882554c007bdcd\" text=\"掘金社区\"><i className=\"iconfont icon-web_xiangxiazhankai\"></i></a>\r\n                            </Tooltip >\r\n                        </li>\r\n                        <li>\r\n                            <Tooltip  placement=\"bottomRight\" title={\"同性交友社区\"}>\r\n                                <a href=\"https://github.com/Wizard-J\" text=\"github\"><i className=\"iconfont icon-github\"></i></a>\r\n                            </Tooltip >\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div id=\"footer\"><a href=\"http://www.miitbeian.gov.cn/\">鄂ICP备18028043号</a></div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    bindEvent = ()=>{\r\n        const oleft = this._left;\r\n        const ocontent = document.getElementsByClassName(\"content\")[0];\r\n        \r\n        const viewPortWidth = document.body.clientWidth;\r\n        const viewPortHeight = document.body.clientHeight;\r\n        const that = this;\r\n        if (viewPortHeight <= viewPortWidth) {\r\n            // 横屏\r\n            window.onmousewheel = function () {\r\n                that.foldMenu()\r\n            }\r\n            // 左划屏幕事件-菜单向左\r\n            oleft.onmousedown = function (e) {\r\n                e.preventDefault()\r\n                oleft.style.transitionDuration = \"initial\";\r\n                const startX = e.clientX; // 鼠标初始坐标\r\n                const startW = parseFloat(getComputedStyle(oleft).width); // 初始宽度\r\n\r\n                oleft.onmouseup = function (e) {\r\n                    that.lrMenu(e, startX)\r\n                }\r\n\r\n                document.onmousemove = function (e) {\r\n                    const endX = e.clientX;\r\n                    const deltaX = startX - endX; // δ>0表示向左划，δ<0表示右划\r\n\r\n                    const endWidth = startW - deltaX\r\n\r\n                    if (endWidth <= 0.25 * viewPortWidth || endWidth >= viewPortWidth) return; // 小于25vw的边界,或者大于100vw视口宽度就不要再变化了\r\n                    else {\r\n                        oleft.style.width = endWidth + \"px\"; // 否则照常将宽度设置为目标宽度\r\n                        ocontent.style.transitionDuration = \"initial\";\r\n                        const colorAlpha = 0.2 + 0.3 / 75 * ( parseFloat(oleft.style.width) / viewPortWidth * 100 )\r\n                        ocontent.style.backgroundColor = \"rgba(238, 205, 168, \"+colorAlpha+\")\";\r\n                     }  \r\n\r\n                    if (e.clientX < 0 || e.clientY < 0 || e.clientX > viewPortWidth || e.clientY > viewPortHeight) { // 鼠标离开视口\r\n                        that.lrMenu(e, startX)\r\n                    }\r\n                }\r\n            }\r\n            \r\n        } else {\r\n            // 竖屏手机\r\n            const oleft = this._left;\r\n            const viewPortHeight = document.body.clientHeight; // 视口高度\r\n            const initialTop = viewPortHeight / 100; // 隐藏状态下的高度\r\n\r\n            oleft.style.transitionDuration = \"initial\";\r\n            oleft.style.top = \"-99vh\";\r\n            // 将content页色调恢复\r\n            ocontent.style.backgroundColor = \"rgba(238, 205, 168, 0.2)\";\r\n            ocontent.style.left = 0;\r\n            ocontent.style.width = \"100vw\";\r\n            // 下滑降下菜单\r\n            oleft.onmousedown = function (e) {\r\n                e.preventDefault();\r\n                const startY = e.clientY; // 鼠标初始位置\r\n                const startPositionY = oleft.style.top.endsWith(\"vh\") ? parseFloat(oleft.style.top) / 100 * viewPortHeight : parseFloat(oleft.style.top); // 鼠标按下时的初始位置\r\n                oleft.onmouseup = function (e) {\r\n                    // 上下收起菜单\r\n                    that.btMenu(e, startY)\r\n                }\r\n                document.onmousemove = function (e) {\r\n                    const endY = e.clientY; // 当前位置\r\n                    const deltaY = startY - endY; // 手指Y方向位移,δY > 0 表示向上滑；δY < 0 表示向下滑\r\n\r\n                    const postition = startPositionY - deltaY;\r\n                    if (postition < - viewPortHeight || postition > - initialTop) return;\r\n                    else {\r\n                        oleft.style.transitionDuration = \"initial\";\r\n                        oleft.style.top = postition + \"px\";\r\n                    }\r\n                    if (e.clientX < 0 || e.clientX > viewPortWidth || e.clientY > viewPortHeight || e.clientY < 0) {// 鼠标离开视口\r\n                        that.btMenu(e, startY)\r\n                    }\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport Content from \"../Content/Content\";\r\nimport Sidebar from \"../Sidebar/Sidebar\";\r\n\r\nimport \"./layout.scss\";\r\n\r\nexport default class Layout extends Component {\r\n\r\n    orienResize(){\r\n        window.location.reload();\r\n    }\r\n\r\n    componentDidMount(){\r\n        // window.addEventListener(\"onorientationchange\" in window ? \"orientationchange\" : \"resize\" , this.orienResize, false);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"layout\">\r\n                <Sidebar/>\r\n                <Content/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Layout from \"./views/Layout/Layout\";\r\nimport { HashRouter as Router} from \"react-router-dom\";\r\nimport \"antd/dist/antd.css\";\r\nimport \"./views/Layout/Layout\";\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        <Layout/>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}