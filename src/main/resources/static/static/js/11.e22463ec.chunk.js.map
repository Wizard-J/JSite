{"version":3,"sources":["interfaces/ariticle.js","local/articleUtil.js","components/Article/Article.jsx"],"names":["markCode","code","marked","newArticle","_x","_newArticle","apply","this","arguments","_callee","articleObj","D_project_blog_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context","prev","next","abrupt","getCSRF","then","CSRFTOKEN","form","FormData","append","title","author","content","tagId","Axios","post","stop","listArticles","_x2","_x3","_listArticles","_callee2","offset","limit","_context2","get","getTimeline","_getTimeline","_callee3","_context3","setOptions","renderer","Renderer","gfm","tables","breaks","pedantic","sanitize","smartLists","smartypants","highlight","hljs","highlightAuto","value","articleTool","id","targetId","articles","window","sessionStorage","getItem","JSON","parse","forEach","item","index","articleArr","setItem","stringify","splice","article","targetIndex","unshift","componentName","toTop","_this","_article","parentNode","scrollTop","_this2","articleId","parseInt","props","match","params","Article","react__WEBPACK_IMPORTED_MODULE_4___default","createElement","className","ref","createdAt","dangerouslySetInnerHTML","__html","onClick","Component"],"mappings":"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","file":"static/js/11.e22463ec.chunk.js","sourcesContent":["import Axios from \"axios\";\nimport marked from \"marked\";\nimport hljs from \"highlight.js\";\nimport {getCSRF} from \"./user\";\n\n\n// marked相关配置\nmarked.setOptions({\n    renderer: new marked.Renderer(),\n    gfm: true,\n    tables: true,\n    breaks: true,\n    pedantic: false,\n    sanitize: true,\n    smartLists: true,\n    smartypants: false,\n    highlight: function (code) {\n        return hljs.highlightAuto(code).value;\n    },\n});\n\n// mark编译\nexport function markCode(code) {\n    return marked(code)\n}\n\n// 保存文章\nexport async function newArticle(articleObj) {\n    return getCSRF().then(CSRFTOKEN => {\n        const form = new FormData();\n        form.append(\"title\", articleObj.title)\n        form.append(\"author\", articleObj.author ? articleObj.author : \"Wizard J\")\n        form.append(\"content\", articleObj.content)\n        form.append(\"tagId\", articleObj.tagId)\n        form.append(\"csrfmiddlewaretoken\", CSRFTOKEN)\n        return Axios.post(\"/api/new/article\", form)\n    })\n}\n\n// 获取文章列表\nexport async function listArticles(offset, limit) {\n    return Axios.get(\"/api/list/articles?limit=\" + limit + \"&offset=\" + offset)\n}\n\n// 获取归档信息\nexport async function getTimeline() {\n    return Axios.get(\"/api/get/timeline\")\n}","const articleTool = {}\n\n\n// 通过id从列表中获取文章\narticleTool.get = id => {\n    let targetId = -1;\n    const articles = window.sessionStorage.getItem(\"articles\") ? JSON.parse(window.sessionStorage.getItem(\"articles\")) : [];\n    articles.forEach((item, index) => {\n        if (item.id === id) targetId = index;\n    });\n    if (targetId !== -1) return articles[targetId];\n    else return null;\n}\n\n// 获取文章列表\narticleTool.getList = () => {\n    return window.sessionStorage.getItem(\"articles\") ? JSON.parse(window.sessionStorage.getItem(\"articles\")) : null;\n}\n\n// 将文章列表保存起来\narticleTool.save = (articleArr) => {\n    window.sessionStorage.setItem(\"articles\", JSON.stringify(articleArr));\n}\n\n// 删除文章\narticleTool.delete = (id) => {\n    const articles = window.sessionStorage.getItem(\"articles\") ? JSON.parse(window.sessionStorage.getItem(\"articles\")) : [];\n    articles.forEach((item, index) => {\n        if (item.id === id) articles.splice(index, 1);\n    });\n    window.sessionStorage.setItem(\"articles\", JSON.stringify(articles));\n}\n\n// 新建文章\narticleTool.create = (article) => {\n    const articles = window.sessionStorage.getItem(\"articles\") ? JSON.parse(window.sessionStorage.getItem(\"articles\")) : [];\n    let targetIndex = -1;\n    articles.forEach((item, index) => { // 去重\n        if (item.id === article.id) {\n            articles.splice(index, 1, article);\n            targetIndex = index;\n        }\n    });\n    if (targetIndex === -1) articles.unshift(article);\n    window.sessionStorage.setItem(\"articles\", JSON.stringify(articles));\n}\n\n\nexport default articleTool;","import React, {Component} from 'react';\nimport {markCode} from \"../../interfaces/ariticle\";\nimport Article from \"../../local/articleUtil\";\n// import Login from \"../../components/Login/Login\";\nimport \"./article.scss\";\n\nexport default class componentName extends Component {\n\n    toTop = () => {\n        const content = this._article.parentNode;\n        content.scrollTop = 0;\n    }\n\n\n    render() {\n\n        const articleId = parseInt(this.props.match.params.id);\n        const article = Article.get(articleId);\n\n        return (\n            <div className=\"article\" ref={_article => this._article = _article}>\n                <div className=\"post\">\n                    <div className=\"post-info\">\n                        <span>Written by</span>\n                        {article.author}\n                        <br/>\n                        <span>on&nbsp;</span>\n                        <time>{article.createdAt}</time>\n                    </div>\n\n                    <h1 className=\"post-title\">{article.title}</h1>\n                    <div className=\"post-line\"></div>\n\n                    <div className=\"content-preview markdown-body\"\n                         dangerouslySetInnerHTML={{__html: markCode(article.content)}}>\n                    </div>\n\n                </div>\n                {/* <Login></Login> */}\n                <div className=\"pagination\">\n                    <span className=\"top\" onClick={this.toTop}>Top</span>\n                </div>\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}